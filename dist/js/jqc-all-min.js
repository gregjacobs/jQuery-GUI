/*!
 * jQuery-Component
 * Copyright(c) 2013 Gregory Jacobs.
 * 
 * MIT Licensed. http://www.opensource.org/licenses/mit-license.php
 * https://github.com/gregjacobs/jQuery-Component
 */

define("jqc/Jqc",["Class","jquery","lodash"],function(e,t,n){var r=e.extend(Object,{blankImgUrl:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",constructor:function(){var e=window.navigator.userAgent.toLowerCase();this.isIE=/msie/.test(e)&&!/opera/.test(e)},emptyFn:function(){},getBlankImgUrl:function(){return this.blankImgUrl},getScrollbarSizes:function(){var e;return function(){if(!e){var n=t('<div style="position:absolute;width:100px;height:100px;overflow:scroll;top:-9999px;" />'),r=n[0];n.appendTo("body"),e={width:r.offsetWidth-r.clientWidth,height:r.offsetHeight-r.clientHeight},n.remove()}return e}}(),getScrollbarWidth:function(){return this.getScrollbarSizes().width},getScrollbarHeight:function(){return this.getScrollbarSizes().height},loadImages:function(e,r,i){if(!n.isArray(e))return;var s=0,o=e.length,u,a=function(){s++,s>=o&&r.call(i||window)};for(var f=0;f<o;f++)u=new Image,t(u).on("load error",a),u.src=e[f]},loadImage:function(e,t,n){this.loadImages([e],t,n)}});return new r}),define("jqc/util/Css",["jquery","lodash","jqc/Jqc"],function(e,t,n){var r={SIDES_MAP:{t:"top",r:"right",b:"bottom",l:"left"},mapToString:function(e){var n=/([A-Z])/g,r="",i;return t.forOwn(e,function(e,t){i=t.replace(n,"-$1").toLowerCase(),r+=i+":"+e+";"}),r},updateStyleEl:function(t,r){var i=e(t);if(n.isIE)for(var s=0,o=i.length;s<o;s++)i[s].styleSheet.cssText=r;else i.text(r)},normalizeSizeValue:function(e){return isNaN(+e)||(e+="px"),e},getPadding:function(e,t){return this.sumSides(e,"padding",t)},getMargin:function(e,t){return this.sumSides(e,"margin",t)},getBorderWidth:function(e,t){return this.sumSides(e,"border",t,"width")},getFrameSize:function(e,t){return this.getPadding(e,t)+this.getMargin(e,t)+this.getBorderWidth(e,t)},sumSides:function(t,n,r,i){var s=0,o=this.SIDES_MAP,u=e(t);i=i?"-"+i:"";for(var a=0,f=r.length;a<f;a++){var l=u.css(n+"-"+o[r.charAt(a)]+i),c=parseInt(l,10);isNaN(c)||(s+=c)}return s}};return r}),define("jqc/util/Html",["lodash"],function(e){var t={encode:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):e},decode:function(e){return e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&nbsp;/g," "):e},stripTags:function(e){return e?String(e).replace(/<[^>]+>/g,""):e},nl2br:function(e){return e.replace(/\n/g,"<br />")},attrMapToString:function(t){var n=[];return e.forOwn(t,function(e,t){n.push(t+'="'+e+'"')}),n.join(" ")}};return t}),define("jqc/template/Template",["lodash","Class"],function(e,t){var n=t.extend(Object,{abstractClass:!0,apply:t.abstractMethod});return n}),define("jqc/template/LoDash",["lodash","jqc/template/Template"],function(e,t){var n=t.extend({compiled:!1,constructor:function(n,r){this._super(arguments);if(n instanceof t)return n;r=r||{};if(e.isString(n)||e.isArray(n))this.tplSource=[].concat(n).join(""),this.tplOptions=e.omit(r,"compiled"),r.compiled&&this.compile();else{if(!n||!n.source)throw new Error("Invalid `tpl` argument to LoDashTpl constructor");this.compiledTplFn=n}},compile:function(){this.compiledTplFn||(this.compiledTplFn=e.template(this.tplSource,null,this.tplOptions))},apply:function(e){return this.compiledTplFn||this.compile(),this.compiledTplFn(e||{})}});return n}),define("jqc/Mask",["jquery","lodash","Class","jqc/template/Template","jqc/template/LoDash","jquery-ui.position"],function(e,t,n,r,i){var s=n.extend(Object,{spinner:!1,msg:"",maskTpl:new i(['<div data-elem="jqc-mask-overlay" class="jqc-mask-overlay" />','<div data-elem="jqc-mask-content" class="jqc-mask-content">','<span class="jqc-mask-spinner" />','<div data-elem="jqc-mask-msg" class="jqc-mask-msg" />',"</div>"]),rendered:!1,spinnerVisibleCls:"jqc-mask-spinner-visible",msgVisibleCls:"jqc-mask-msg-visible",shown:!1,constructor:function(n,s){if(t.isElement(n))this.$targetEl=e(n);else{if(!(n instanceof e))throw new Error("jqc.Mask requires the first argument to its constructor to be an HTMLElement, or a jQuery wrapped set");if(n.length!==1)throw new Error("If the 'targetEl' argument to the jqc.Mask constructor is a jQuery wrapped set, it must contain exactly one element.");this.$targetEl=n}this.maskTpl instanceof r||(this.maskTpl=new i(this.maskTpl)),this.updateConfig(s)},updateConfig:function(e){delete this.spinner,delete this.msg,t.assign(this,e),this.rendered&&this.updateMaskElements()},initMaskElements:function(){if(!this.rendered){var e=this.$targetEl;e.append(this.maskTpl.apply({}));var n=t.bind(this.onMaskClick,this);this.$overlayEl=e.find('[data-elem="jqc-mask-overlay"]').on("click",n),this.$contentEl=e.find('[data-elem="jqc-mask-content"]').on("click",n),this.$msgEl=e.find('[data-elem="jqc-mask-msg"]'),this.rendered=!0,this.updateMaskElements()}},updateMaskElements:function(){this.rendered&&(this.$contentEl.toggleClass(this.spinnerVisibleCls,this.spinner),this.setMsg(this.msg))},setMsg:function(e){this.rendered?(this.$contentEl.toggleClass(this.msgVisibleCls,!!e),this.$msgEl.html(e)):this.msg=e},onMaskClick:function(e){e.stopPropagation()},show:function(){if(!this.isShown()){this.initMaskElements();var e=this.$targetEl,t=this.$overlayEl,n=this.$contentEl;e.addClass("jqc-masked"),e.css("position")==="static"&&!e.is("body")&&e.addClass("jqc-masked-relative"),t.appendTo(e),t.height(e.outerHeight()),this.$contentEl.appendTo(e),this.repositionContentEl();var r=this,i=setInterval(function(){r.isShown()?r.repositionContentEl():clearInterval(i)},100);this.shown=!0}},repositionContentEl:function(){this.$contentEl.position({my:"center center",at:"center center",of:this.$targetEl})},hide:function(){this.isShown()&&(this.$overlayEl.detach(),this.$contentEl.detach(),this.$targetEl.removeClass("jqc-masked").removeClass("jqc-masked-relative"),this.shown=!1)},isShown:function(){return this.shown},destroy:function(){this.hide(),this.rendered&&(this.$overlayEl.remove(),this.$contentEl.remove())}});return s}),define("jqc/anim/Animation",["require","jquery","lodash","Class","Observable","jqc/Component"],function(e,t,n,r,i,s){var o=r.extend(i,{duration:250,easing:"linear",running:!1,complete:!1,constructor:function(e){n.assign(this,e),this._super(arguments),this.addEvents("beforeanimate","afteranimate","complete")},setTarget:function(e){return this.$target=null,this.target=e,this},resolveTarget:function(){var n=this.$target||null;if(n)return n;var r=this.target;return r&&(r instanceof e("jqc/Component")?n=t(r.getEl()):n=t(r)),delete this.target,this.$target=n},start:function(){var e=this.resolveTarget(),t=this.from,r=this.to,i=this.effect,s=this.duration,o=this.onLastFrame;if(!e)throw new Error("jqc.anim.Animation.start(): Error. No `target` config provided");if(!r&&!i)throw new Error("jqc.anim.Animation.start(): Error. No `to` or `effect` config provided");if(!this.running&&!this.complete&&this.fireEvent("beforeanimate",this)!==!1){this.running=!0,t&&e.css(t);if(i){var u,a;typeof i=="object"?(u=i.type,a=i):(u=i,a={}),e.effect(u,a,s,n.bind(o,this))}else e.animate(r,{duration:s,easing:this.easing,complete:n.bind(o,this)})}},isRunning:function(){return this.running},isComplete:function(){return this.complete},end:function(){this.running&&(this.$target.stop(!1,!0),this.onLastFrame())},onLastFrame:function(){this.running&&(this.running=!1,this.complete=!0,typeof this.callback=="function"&&this.callback.call(this.scope||window,this),this.fireEvent("afteranimate",this),this.fireEvent("complete",this),delete this.$target)}});return o}),define("jqc/plugin/Plugin",["lodash","Class","Observable"],function(e,t,n){var r=t.extend(n,{abstractClass:!0,constructor:function(t){e.assign(this,t),this._super(arguments)},init:t.abstractMethod});return r}),define("jqc/ComponentManager",["require","jqc/Component"],function(e){var t={componentClasses:{},registerType:function(e,t){e=e.toLowerCase();if(!!this.componentClasses[e])throw new Error("Error: jqc.ComponentManager already has a type '"+e+"'");this.componentClasses[e]=t},getType:function(t){t=t.toLowerCase();var n=t==="component"?e("jqc/Component"):this.componentClasses[t];if(!n)throw new Error("The class with type name '"+t+"' has not been registered. Make sure that the component "+"exists, and has been 'required' by a RequireJS require() or define() call");return n},hasType:function(e){return e?(e=e.toLowerCase(),e==="component"?!0:!!this.componentClasses[e]):!1},create:function(t){var n=t.type?t.type.toLowerCase():undefined,r=e("jqc/Component");if(t instanceof r)return t;if(n==="component")return new r(t);if(this.hasType(n||"container"))return new this.componentClasses[n||"container"](t);throw new Error("ComponentManager.create(): Unknown type: '"+n+"'")}};return t}),define("jqc/Component",["require","jquery","lodash","Class","jqc/Jqc","Observable","jqc/util/Css","jqc/util/Html","jqc/Mask","jqc/anim/Animation","jqc/plugin/Plugin","jqc/template/Template","jqc/template/LoDash","jqc/ComponentManager"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=r.extend(s,{elType:"div",hidden:!1,baseCls:"jqc-Component",cls:"",masked:!1,parentContainer:null,rendered:!1,showing:!1,hiding:!1,currentAnimation:null,deferMaskShow:!1,destroying:!1,destroyed:!1,constructor:function(e){n.assign(this,e),this._super(arguments),this.addEvents("render","beforeshow","show","showbegin","aftershow","beforehide","hide","hidebegin","afterhide","beforedestroy","destroy"),this.uuid=this.elId="jqc-cmp-"+n.uniqueId(),this.id=this.id||this.uuid,this.plugins=this.plugins||[],n.isArray(this.plugins)||(this.plugins=[this.plugins]),this.initComponent(),this.plugins.length>0&&this.initPlugins(this.plugins),this.renderTo&&(this.render(this.renderTo),delete this.renderTo)},initComponent:i.emptyFn,initPlugins:function(e){if(n.isArray(e)){for(var t=0,r=e.length;t<r;t++)this.initPlugins(e[t]);return}if(!(e instanceof l))throw new Error("error: a plugin provided to this Component was not of type jqc.plugin.Plugin");e.init(this)},render:function(e,r){if(this.destroyed)return;var i;n.isNumber(r)||n.isString(r)||n.isElement(r)||r instanceof t?(i=r,r={position:i}):(r=r||{},i=r.position);var s=t(e);typeof i!="undefined"&&(typeof i=="number"?i=s.children().get(i):i=s.find(i));if(this.rendered)i?i[0]!==this.$el[0]&&this.$el.insertBefore(i):this.$el.appendTo(s);else{var a=u.attrMapToString(this.getRenderAttributes());delete this.attr;var f=o.mapToString(this.getRenderStyle());delete this.style;var l=this.renderTpl,p="";l&&(l=l instanceof c?l:new h(l),p=l.apply(this.getRenderTplData()),delete this.renderTpl,delete this.renderTplData);var d=n.compact([this.baseCls,this.componentCls,this.cls]).join(" "),v=["<",this.elType,' id="',this.elId,'" class="',d,'" style="',f,'" ',a,">",p,"</",this.elType,">"].join("");this.$el=t(v),i?this.$el.insertBefore(i):this.$el.appendTo(s),this.rendered=!0,this.onRender(s,r),this.tpl&&!(this.tpl instanceof c)&&(this.tpl=new h(this.tpl));var m=this.getContentTarget();this.tpl&&!this.updateCalledWithContent?m.append(this.tpl.apply(this.tplData)):(this.html&&m.append(this.html),this.contentEl&&m.append(this.contentEl)),delete this.tplData,delete this.updateCalledWithContent,delete this.html,delete this.contentEl,this.hidden&&this.$el.hide(),this.masked&&this.mask(this.deferredMaskConfig),this.onAfterRender(s,r),this.fireEvent("render",this),r.deferLayout||this.doLayout()}},getRenderAttributes:function(){return this.attr||{}},getRenderStyle:function(){var e=this.style||{},t=this.width,n=this.height,r=this.minWidth,i=this.minHeight,s=this.maxWidth,u=this.maxHeight,a,f=o.normalizeSizeValue;return t!==a&&(e.width=f(t)),n!==a&&(e.height=f(n)),r!==a&&(e.minWidth=f(r)),i!==a&&(e.minHeight=f(i)),s!==a&&(e.maxWidth=f(s)),u!==a&&(e.maxHeight=f(u)),e},getRenderTplData:function(){return n.assign({},{elId:this.elId,baseCls:this.baseCls,componentCls:this.componentCls},this.renderTplData||{})},isRendered:function(){return this.rendered},onRender:i.emptyFn,onAfterRender:i.emptyFn,update:function(e){var t=n.isPlainObject(e);this.rendered?this.getContentTarget().empty().append(t?this.tpl.apply(e):e):t?this.tplData=e:(delete this.contentEl,this.html=e,this.updateCalledWithContent=!0)},doLayout:function(){this.onComponentLayout()},onComponentLayout:i.emptyFn,updateLayout:function(){var e=this;while(e.parentContainer)e=e.parentContainer;e.doLayout()},setAttr:function(e,t){return this.rendered?this.$el.attr(e,t):(this.attr=this.attr||{},typeof e=="object"?n.assign(this.attr,e):this.attr[e]=t),this},addCls:function(e){if(!this.rendered){var n=e.split(" ");for(var r=0,i=n.length;r<i;r++){var s=n[r],o=new RegExp("(^| )"+s+"( |$)");o.test(this.cls)||(this.cls+=" "+s)}this.cls=t.trim(this.cls)}else this.$el.addClass(e);return this},removeCls:function(e){if(!this.rendered){var t=e.split(" "),n=function(e,t,n){return t===" "&&n===" "?" ":""};for(var r=0,i=t.length;r<i;r++){var s=t[r],o=new RegExp("(^| )"+s+"( |$)","g");this.cls=this.cls.replace(o,n)}}else this.$el.removeClass(e);return this},toggleCls:function(e,t){return typeof t=="undefined"?this[this.hasCls(e)?"removeCls":"addCls"](e):this[t?"addCls":"removeCls"](e),this},hasCls:function(e){if(!this.rendered){var t=new RegExp("(^| )"+e+"( |$)","g");return t.test(this.cls)}return this.$el.hasClass(e)},setStyle:function(e,t){return this.rendered?this.$el.css(e,t):(this.style=this.style||{},typeof e=="object"?n.assign(this.style,e):this.style[e]=t),this},getContentTarget:function(){return this.getEl()},getUuid:function(){return this.uuid},getId:function(){return this.id},getEl:function(){return this.$el},setSize:function(e,t){typeof e!="undefined"&&(this.width=e,this.rendered&&this.$el.width(e)),typeof t!="undefined"&&(this.height=t,this.rendered&&this.$el.height(t))},setWidth:function(e){this.setSize(e,undefined)},getWidth:function(){return this.$el.width()},getInnerWidth:function(){return this.$el.innerWidth()},getOuterWidth:function(e){return this.$el.outerWidth(e||!1)},setHeight:function(e){this.setSize(undefined,e)},getHeight:function(){return this.$el.height()},getInnerHeight:function(){return this.$el.innerHeight()},getOuterHeight:function(e){return this.$el.outerHeight(e||!1)},getConfiguredWidth:function(){return this.width},getConfiguredHeight:function(){return this.height},getPadding:function(e){return o.getPadding(this.$el,e)},getMargin:function(e){return o.getMargin(this.$el,e)},getBorderWidth:function(e){return o.getBorderWidth(this.$el,e)},getFrameSize:function(e){return o.getFrameSize(this.$el,e)},setVisible:function(e){return this[e?"show":"hide"]()},show:function(e){if(!this.hidden||this.fireEvent("beforeshow",this)===!1)return this;this.hidden=!1;if(this.rendered){e=e||{},this.hiding&&this.currentAnimation.end(),this.showing=!0,this.onBeforeShow(e),this.$el.show(),this.onShow(e),this.fireEvent("showbegin",this),this.fireEvent("show",this),this.deferMaskShow&&this.mask(this.deferredMaskConfig);var t=e.anim;if(t){t=n.assign({},t,{target:this});var r=this.currentAnimation=new f(t);r.on("complete",n.partial(this.onShowComplete,e),this),r.start()}else this.onShowComplete(e)}return this},onShowComplete:function(e){this.showing=!1,this.currentAnimation=null,this.onAfterShow(e),this.fireEvent("aftershow",this)},onBeforeShow:i.emptyFn,onShow:i.emptyFn,onAfterShow:i.emptyFn,hide:function(e){if(this.hidden||this.fireEvent("beforehide",this)===!1)return this;this.hidden=!0;if(this.rendered){e=e||{},this.showing&&this.currentAnimation.end(),this.hiding=!0,this.onBeforeHide(e),this.fireEvent("hidebegin",this);var t=e.anim;if(t){t=n.assign({},t,{target:this});var r=this.currentAnimation=new f(t);r.on("complete",n.partial(this.onHideComplete,e),this),r.start()}else this.onHideComplete(e)}return this},onHideComplete:function(e){this.hiding=!1,this.currentAnimation=null,this.$el.hide(),this.onHide(e),this.fireEvent("hide",this),this.onAfterHide(e),this.fireEvent("afterhide",this)},onBeforeHide:i.emptyFn,onHide:i.emptyFn,onAfterHide:i.emptyFn,isHidden:function(e){return this.hidden?!0:this.rendered?e?!this.isDomVisible():!1:e?!0:!1},isVisible:function(e){return!this.isHidden(e)},isDomVisible:function(){if(!this.isRendered())return!1;var e=this.$el;if(e.css("display")==="none")return!1;var t=e.parents(),n=t.length;if(n===0||t[n-1].tagName.toLowerCase()!=="html")return!1;for(var r=0,i=t.length;r<i;r++)if(t.eq(r).css("display")==="none")return!1;return!0},detach:function(){this.rendered&&this.$el.detach()},mask:function(e){e=e||this.maskConfig,this.masked=!0,this.rendered?this.isHidden()?(this.deferMaskShow=!0,this.deferredMaskConfig=e):(this._mask?this._mask.updateConfig(e):this._mask=new a(this.getMaskTarget(),e),this._mask.show(),this.deferMaskShow=!1,delete this.deferredMaskConfig):this.deferredMaskConfig=e},unMask:function(){this.masked=!1,this.deferMaskShow=!1,delete this.deferredMaskConfig,this.rendered&&this._mask&&this._mask.hide()},isMasked:function(){return this.masked},getMaskTarget:function(){return this.getEl()},setParentContainer:function(e){this.parentContainer=e},getParentContainer:function(){return this.parentContainer},bubble:function(e,t,n){var r=this;while(r){if(e.apply(t||r,n||[r])===!1)break;r=r.parentContainer}},findParentBy:function(e){for(var t=this.parentContainer;t!==null&&!e(t,this);t=t.parentContainer);return t||null},findParentById:function(e){for(var t=this.parentContainer;t&&t.id!==e;t=t.parentContainer);return t||null},findParentByType:function(t){if(typeof t=="string"){t=e("jqc/ComponentManager").getType(t);if(!t)return null}for(var n=this.parentContainer;n&&!(n instanceof t);n=n.parentContainer);return n||null},isDescendantOf:function(e){for(var t=this.parentContainer;t&&t!==e;t=t.parentContainer);return!!t},destroy:function(){if(!this.destroyed&&this.fireEvent("beforedestroy",this)!==!1){this.destroying=!0,this.onDestroy(),this.currentAnimation&&this.currentAnimation.end(),this._mask instanceof a&&this._mask.destroy();for(var e in this)if(this.hasOwnProperty(e)){var r=this[e];n.isElement(r)?(t(r).remove(),delete this[e]):r instanceof t&&(r.remove(),delete this[e])}this.rendered=!1,this.destroying=!1,this.destroyed=!0,this.fireEvent("destroy",this),this.purgeListeners()}},onDestroy:i.emptyFn});return p}),define("jqc/layout/Layout",["lodash","Class","jqc/Jqc","Observable"],function(e,t,n,r){var i=t.extend(r,{abstractClass:!0,container:null,destroyed:!1,constructor:function(t){this.addEvents("destroy"),e.assign(this,t),this._super(arguments),this.initLayout(),this.container&&this.setContainer(this.container)},initLayout:n.emptyFn,setContainer:function(e){this.container=e,this.onContainerSet(e)},getContainer:function(){return this.container},onContainerSet:n.emptyFn,doLayout:function(){if(this.destroyed)return;var e=this.container,t=e.getItems(),n=t.length,r=e.getContentTarget(),i,s,o=this.needsLayoutMap={};for(s=0;s<n;s++)i=t[s],o[i.getUuid()]=!0,i.on("afterlayout",this.markLayoutComplete,this);this.onLayout(t,r);for(s=0;s<n;s++)i=t[s],i.un("afterlayout",this.markLayoutComplete,this),o[i.getUuid()]===!0&&i.doLayout();this.afterLayout(t,r)},onLayout:n.emptyFn,afterLayout:n.emptyFn,markLayoutComplete:function(e){this.needsLayoutMap[e.getUuid()]=!1},renderComponent:function(t,n,r){r=r||{};var i=r.position,s=t.getEl();if(!t.isRendered()||typeof i=="undefined"&&s.parent()[0]!==n[0]||typeof i=="number"&&n.children()[i]!==s[0]||(typeof i=="string"||typeof i=="object")&&n.find(i).prev()[0]!==s[0])e.assign(r,{deferLayout:!0}),t.render(n,r)},sizeComponent:function(e,t,n){var r=t,i=n;isNaN(+t)||(r=t-e.getMargin("lr")-e.getPadding("lr")-e.getBorderWidth("lr")),isNaN(+n)||(i=n-e.getMargin("tb")-e.getPadding("tb")-e.getBorderWidth("tb")),e.setSize(r,i)},destroy:function(){this.destroyed||(this.onDestroy(),this.destroyed=!0,this.fireEvent("destroy",this),this.purgeListeners(),this.setContainer(null))},onDestroy:n.emptyFn});return i}),define("jqc/layout/Auto",["require","jqc/layout/Layout","jqc/Container"],function(e,t){var n=t.extend({onLayout:function(e,t){this._super(arguments);for(var n=0,r=e.length;n<r;n++)this.renderComponent(e[n],t,{position:n})}});return e(["jqc/Container"],function(e){e.registerLayout("auto",n)}),n}),define("jqc/Container",["require","lodash","Class","jqc/Jqc","jqc/ComponentManager","jqc/Component","jqc/layout/Layout","jqc/layout/Auto"],function(e,t,n,r,i,s){var o=n.extend(s,{statics:{LAYOUTS:{},registerLayout:function(e,t){this.LAYOUTS[e.toLowerCase()]=t}},defaultType:"container",acceptType:s,destroyRemoved:!0,baseCls:"jqc-Container",deferLayout:!1,initComponent:function(){this.items&&(this.html=undefined,this.contentEl=undefined);if(typeof this.acceptType!="function")throw new Error("'acceptType' config did not resolve to a constructor function");this.addEvents("beforeadd","add","reorder","beforeremove","remove","afterlayout"),this._super(arguments),this.childComponents=[],this.items&&(this.add(this.items),delete this.items),this.layout&&this.setLayout(this.layout),this.data&&this.setData(this.data)},createComponent:function(e){return e=t.defaults(t.clone(e),{parentContainer:this,type:this.defaultType}),i.create(e)},add:function(e){var n;if(t.isArray(e)){n=[];for(var r=0,i=e.length;r<i;r++)n.push(this.doInsert(e[r]))}else n=this.doInsert(e);return this.doLayout(),n},insert:function(e,t){return e=this.doInsert(e,t),this.doLayout(),e},doInsert:function(e,t){typeof t!="number"?t=this.childComponents.length:t<0?t=0:t>this.childComponents.length&&(t=this.childComponents.length);var n=e instanceof s,r=n&&this.has(e);if(r){var i=this.childComponents;for(var o=0,u=i.length;o<u;o++)if(i[o]===e){this.childComponents.splice(o,1);break}return this.childComponents.splice(t,0,e),this.onReorder(e,t,o),this.fireEvent("reorder",this,e,t,o),e}n||(e=this.createComponent(e));if(e instanceof this.acceptType){if(this.fireEvent("beforeadd",this,e)!==!1){var a=e.getParentContainer();return a&&a.remove(e,!1),e.setParentContainer(this),this.childComponents.splice(t,0,e),this.onAdd(e,t),this.fireEvent("add",this,e,t),e}return null}throw new Error("A Component added to the Container was not of the correct class type ('acceptType' config)")},onAdd:r.emptyFn,onReorder:r.emptyFn,remove:function(e,n){var r;if(t.isArray(e)){r=[];for(var i=0,s=e.length;i<s;i++){var o=this.doRemove(e[i],n);o&&r.push(o)}}else r=this.doRemove(e,n);return this.doLayout(),r},removeAt:function(e){return this.remove(this.getItemAt(e))},removeAll:function(e){var t=this.childComponents;for(var n=t.length-1;n>=0;n--)this.doRemove(t[n],e);this.doLayout()},doRemove:function(e,t){var n,r,i=this.childComponents,s=-1;t=typeof t=="undefined"?this.destroyRemoved:t;for(n=0,r=i.length;n<r;n++)if(i[n]===e){s=n;break}return s!==-1&&this.fireEvent("beforeremove",this,e)!==!1?(e.setParentContainer(null),e.detach(),i.splice(s,1),this.onRemove(e,s),this.fireEvent("remove",this,e,s),t&&e.destroy(),e):null},onRemove:r.emptyFn,getCount:function(){return this.childComponents.length},getItems:function(){return this.childComponents},getItemAt:function(e){return this.childComponents[e]||null},getItemIndex:function(e){var t=this.childComponents;for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},has:function(e){return this.getItemIndex(e)!==-1},onShow:function(){this._super(arguments),this.deferLayout&&this.doLayout();var e=this.childComponents;for(var t=0,n=e.length;t<n;t++){var r=e[t];r.isHidden()||e[t].onShow()}},doLayout:function(){this._super(arguments),this.canLayout()?(this.deferLayout=!1,this.onBeforeLayout(),this.getLayout().doLayout(),this.onLayout(),this.fireEvent("afterlayout",this)):this.deferLayout=!0},onBeforeLayout:r.emptyFn,onLayout:r.emptyFn,canLayout:function(){return this.isRendered()&&!this.isHidden(!0)},getLayout:function(){if(!this.layout){var t=e("jqc/layout/Auto");this.setLayout(new t)}return this.layout},setLayout:function(n){var r=e("jqc/layout/Layout");if(this.layout instanceof r&&this.layout!==n){var i=this.childComponents;for(var s=0,u=i.length;s<u;s++)i[s].detach();this.layout.destroy()}if(n instanceof r)this.layout=n,n.setContainer(this);else{var a,f={container:this};if(typeof n=="string")a=n;else{if(typeof n!="object")throw new Error("Invalid layout argument provided to setLayout. See method description in docs.");a=n.type||"auto",f=t.defaults(t.clone(f),n),delete f.type}a=a.toLowerCase();if(!o.LAYOUTS[a])throw new Error("layout type '"+a+"' is not a registered layout type.");this.layout=new o.LAYOUTS[a](f)}},cascade:function(e,t,n){if(e.apply(t||this,n||[this])!==!1){var r=this.childComponents;for(var i=0,s=r.length;i<s;i++)r[i].cascade?r[i].cascade(e,t,n):e.apply(t||r[i],n||[r[i]])}},findById:function(e){var t=null,n=this;return this.cascade(function(r){if(r!==n&&r.getId()===e)return t=r,!1}),t},findBy:function(e,t){var n=[],r=this;return this.cascade(function(i){i!==r&&e.call(t||i,i,r)===!0&&n.push(i)}),n},findByType:function(e){if(typeof e=="string"){e=i.getType(e);if(!e)return[]}return this.findBy(function(t){if(n.isInstanceOf(t,e))return!0})},onDestroy:function(){this.removeAll();var t=e("jqc/layout/Layout");this.layout instanceof t&&this.layout.destroy(),this._super(arguments)}});return i.registerType("container",o),o}),define("jqc/Image",["lodash","Class","jqc/ComponentManager","jqc/Component"],function(e,t,n,r){var i=t.extend(r,{src:"",elType:"img",baseCls:"jqc-Image",loaded:!1,errored:!1,blankImg:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",initComponent:function(){this.addEvents("load","error"),this._super(arguments)},onRender:function(){this._super(arguments),this.src&&this.setSrc(this.src)},setSrc:function(t){this.src=t,this.rendered&&(this.loaded=!1,this.errored=!1,this.$el.unbind(".uiImage"),this.$el.attr("src",this.blankImg),this.$el.bind({"load.uiImage":e.bind(this.onImageLoad,this),"error.uiImage":e.bind(this.onImageError,this)}),this.$el.attr("src",this.src))},getSrc:function(){return this.src},isLoaded:function(){return this.loaded},isErrored:function(){return this.errored},onImageLoad:function(){this.loaded=!0,this.fireEvent("load",this)},onImageError:function(){this.errored=!0,this.fireEvent("error",this)}});return n.registerType("image",i),i}),define("jqc/Label",["jqc/ComponentManager","jqc/Component"],function(e,t){var n=t.extend({text:"",baseCls:"jqc-Label",onRender:function(){this._super(arguments),this.$el.append(this.text||""),delete this.text},setText:function(e){this.rendered?this.$el.html(e):this.text=e},getText:function(){return this.rendered?this.getEl().html():this.text||""}});return e.registerType("label",n),n}),define("jqc/layout/HBox",["jquery","jqc/Component","jqc/Container","jqc/layout/Layout"],function(e,t,n,r){var i=r.extend({onLayout:function(t,n){this._super(arguments);var r=[],i=0,s=0,o,u,a,f=t.length;for(o=0;o<f;o++)a=t[o],a.addCls("jqc-layout-HBox-component"),this.renderComponent(a,n,{position:o}),a.isHidden()||(a.flex?(r.push(a),i+=a.flex):(a.doLayout(),s+=Math.floor(1+a.getOuterWidth(!0))));if(i>0){var l=n.width(),c=n.height(),h=l-s,p=0;for(o=0,u=r.length;o<u;o++){a=r[o];var d=a.flex/i*h;p+=d%1,d=Math.floor(d),o===u-1&&(d+=Math.floor(p)),this.sizeComponent(a,d,undefined)}}this.$clearEl||(this.$clearEl=e('<div class="jqc-layout-HBox-clear" />')),n.append(this.$clearEl)},onDestroy:function(){this.$clearEl&&this.$clearEl.remove(),this._super(arguments)}});return n.registerLayout("hbox",i),i}),define("jqc/panel/Header",["jqc/Container","jqc/Label","jqc/layout/HBox"],function(e,t){var n=e.extend({layout:"hbox",componentCls:"jqc-Panel-Header",initComponent:function(){this.titleLabel=this.createTitleLabel(),this.toolButtonsCt=this.createToolButtonsCt(),this.items=this.buildItems(),this._super(arguments)},buildItems:function(){return[this.titleLabel,{type:"component",flex:1},this.toolButtonsCt]},createTitleLabel:function(){return new t({cls:this.componentCls+"-title",text:this.title})},createToolButtonsCt:function(){return new e({cls:this.componentCls+"-toolButtons",defaultType:"toolbutton",items:this.toolButtons})},setTitle:function(e){this.titleLabel.setText(e)}});return n}),define("jqc/button/Button",["jquery","lodash","jqc/Component","jqc/ComponentManager","jqc/template/LoDash"],function(e,t,n,r,i){var s=n.extend({iconAlign:"left",text:"",tooltip:"",disabled:!1,baseCls:"jqc-Button",renderTpl:new i(['<span class="<%= baseCls %>-icon <%= baseCls %>-icon-left <%= leftIconElCls %>"></span>','<a id="<%= elId %>-text" class="<%= baseCls %>-text <%= textElCls %>" href="javascript:;" title="<%= tooltip %>">',"<%= text %>","</a>",'<span class="<%= baseCls %>-icon <%= baseCls %>-icon-right <%= rightIconElCls %>"></span>']),initComponent:function(){this.addEvents("click","mouseenter","mouseleave"),this._super(arguments)},getRenderAttributes:function(){var e=this._super(arguments);return this.tooltip&&(e.title=this.tooltip),e},getRenderTplData:function(){var e="",n="",r="",i=this.iconCls,s=this.baseCls+"-hiddenEl";return i?this.iconAlign==="left"?(e=i,n=s):(e=s,n=i):e=n=s,t.defaults(this._super(arguments),{text:this.text,tooltip:this.tooltip,leftIconElCls:e,rightIconElCls:n,textElCls:r})},onRender:function(){this._super(arguments),this.disabled&&this.disable(),this.$textEl=e("#"+this.elId+"-text"),this.$el.on({mouseenter:t.bind(this.onMouseEnter,this),mouseleave:t.bind(this.onMouseLeave,this),mousedown:t.bind(this.onMouseDown,this),mouseup:t.bind(this.onMouseUp,this),click:t.bind(this.onClick,this)})},setText:function(e){this.text=e,this.rendered&&this.$textEl.html(e)},disable:function(){this.disabled=!0,this.rendered&&this.$el.prop("disabled",!0)},enable:function(){this.disabled=!1,this.rendered&&this.$el.prop("disabled",!1)},setDisabled:function(e){this[e?"disable":"enable"]()},onClick:function(e){this.handler&&this.handler.call(this.scope||this,this),this.fireEvent("click",this)},onMouseEnter:function(){this.addCls(this.baseCls+"-hover"),this.fireEvent("mouseenter",this)},onMouseLeave:function(){this.removeCls(this.baseCls+"-hover"),this.fireEvent("mouseleave",this)},onMouseDown:function(){this.addCls(this.baseCls+"-active")},onMouseUp:function(){this.removeCls(this.baseCls+"-active")}});return r.registerType("button",s),s}),define("jqc/panel/ToolButton",["jqc/button/Button","jqc/ComponentManager"],function(e,t){var n=e.extend({componentCls:"jqc-ToolButton",initComponent:function(){if(!this.toolType)throw new Error("'toolType' cfg required");var e=this.componentCls,t=this.toolType;this.iconCls=["jqc-icon","jqc-icon-"+t,e+"-icon",e+"-icon-"+t].join(" "),this._super(arguments)}});return t.registerType("toolbutton",n),n}),define("jqc/panel/Panel",["jquery","lodash","jqc/util/Css","jqc/ComponentManager","jqc/Container","jqc/panel/Header","jqc/template/LoDash","jqc/panel/ToolButton"],function(e,t,n,r,i,s,o){var u=i.extend({title:"",baseCls:"jqc-Panel",renderTpl:new o(['<div id="<%= elId %>-body" class="<%= baseCls %>-body" <% if( bodyStyle ) { %>style="<%= bodyStyle %>"<% } %>></div>']),initComponent:function(){this._super(arguments),(this.title||this.toolButtons)&&this.doCreateHeader(),this.buttons&&this.doCreateFooter()},onRender:function(){this._super(arguments),this.$bodyEl=e("#"+this.elId+"-body"),this.header&&this.header.render(this.$el,0),this.footer&&this.footer.render(this.$el)},getRenderTplData:function(){var e=n.mapToString(this.bodyStyle||{});return t.assign(this._super(arguments),{bodyStyle:e})},getContentTarget:function(){return this.$bodyEl},doCreateHeader:function(){this.header=this.createHeader(),this.header.setVisible(!this.headerHidden),delete this.headerHidden,this.rendered&&this.header.render(this.$el,0)},createHeader:function(){return new s({title:this.title,toolButtons:this.toolButtons})},doCreateFooter:function(){this.footer=this.createFooter(),this.rendered&&this.footer.render(this.$el)},createFooter:function(){return new i({cls:this.baseCls+"-Footer",layout:"hbox",items:[{type:"component",flex:1},{type:"container",cls:this.baseCls+"-Footer-buttons",defaultType:"button",items:this.buttons}]})},setTitle:function(e){return this.header||this.doCreateHeader(),this.title=e,this.header.setTitle(e),this},getTitle:function(){return this.title},showHeader:function(){return this.header?this.header.show():this.headerHidden=!1,this},hideHeader:function(){return this.header?this.header.hide():this.headerHidden=!0,this}});return r.registerType("panel",u),u}),define("jqc/Overlay",["jquery","lodash","Class","jqc/Jqc","jqc/anim/Animation","jqc/Component","jqc/panel/Panel","jquery-ui.position"],function(e,t,n,r,i,s,o){var u=o.extend({abstractClass:!0,autoShow:!1,constrainToViewport:!0,baseCls:"jqc-Overlay",initComponent:function(){this._super(arguments),this.hidden=!0,this.autoShow&&this.show()},onRender:function(){this._super(arguments),this.windowResizeHandler=t.debounce(t.bind(this.onWindowResize,this),150),e(window).on("resize",this.windowResizeHandler)},show:function(e){e=e||{};var t=e.anim;if(t===!1)delete e.anim;else if(t===undefined||t===!0)e.anim=this.showAnim;this.rendered||this.render(document.body),this._super([e])},onShow:function(e){this._super(arguments);if(e.anchor)this.setAnchor(e.anchor);else if(e.hasOwnProperty("x")||e.hasOwnProperty("y")){var t=typeof e.x!="undefined"?e.x:this.x,n=typeof e.y!="undefined"?e.y:this.y;this.setPosition(t,n)}else this.updatePosition()},setPosition:function(e,t){this.x=e,this.y=t,this.anchor=null,this.updatePosition()},getPosition:function(){if(this.isHidden())return{x:0,y:0,left:0,top:0,right:0,bottom:0};var t=e(window),n=this.$el.position(),r=n.left,i=n.top,s=t.width()-(n.left+this.getWidth()),o=t.height()-(n.top+this.getHeight());return{x:r,y:i,left:r,top:i,right:s,bottom:o}},setAnchor:function(e){this.anchor=e,this.updatePosition()},updatePosition:function(){if(this.isVisible()){var e,t,n,r,i=this.$el;if(this.anchor){var o=this.anchor,u=o.offset;e=o.my||"left top",t=o.at||"left bottom",u&&(e=e.split(/\s+/),u=u.split(/\s+/),e[0]+="+"+u[0],e[1]+="+"+u[1]||u[0],e=e.join(" ")),n=o.element||o.of,r=o.collision||"flip",n instanceof s&&(n=n.getEl())}else{var a=this.x,f=this.y,l=a,c=f,h="center",p="center";typeof a=="number"&&(l=(a>0?"left":"right")+"+"+a,h="left"),typeof f=="number"&&(c=(f>0?"top":"bottom")+"+"+f,p="top"),e=l+" "+c,t=h+" "+p,n=window,this.constrainToViewport&&(r="fit")}i.position({my:e,at:t,of:n,collision:r})}},onWindowResize:function(){this.updatePosition()},onDestroy:function(){this.rendered&&e(window).off("resize",this.windowResizeHandler),this._super(arguments)}});return u}),define("jqc/layout/Fit",["Class","jqc/Component","jqc/Container","jqc/layout/Layout"],function(e,t,n,r){var i=r.extend({browserManagedWidth:!1,browserManagedHeight:!1,lastRenderedComponent:null,onLayout:function(e,t){this._super(arguments);var n=e.length;if(n>0){var r=e[0],i=this.browserManagedWidth?"100%":t.width(),s=this.browserManagedHeight?"100%":t.height();for(var o=1;o<n;o++)e[o].detach();this.renderComponent(r,t),r!==this.lastRenderedComponent&&(this.lastRenderedSize={},this.lastRenderedComponent=r);var u=this.lastRenderedSize;if(i!==u.width||s!==u.height)this.sizeComponent(r,i,s),this.lastRenderedSize={width:i,height:s}}}});return n.registerLayout("fit",i),i}),define("jqc/Viewport",["jquery","lodash","jqc/ComponentManager","jqc/Container","jqc/layout/Fit"],function(e,t,n,r){var i=r.extend({layout:"fit",initComponent:function(){this._super(arguments),this.setStyle({position:"relative","overflow-x":"hidden","overflow-y":"auto"}),this.onWindowResizeDelegate=t.debounce(t.bind(this.onWindowResize,this),150),e(window).bind("resize",this.onWindowResizeDelegate)},onRender:function(){this._super(arguments),this.recalcDimensions()},recalcDimensions:function(){if(this.rendered){var e=this.$el,t=e.parent();e.css({height:t.height()})}},onWindowResize:function(){this.destroyed||this.doResize()},doResize:function(){this.recalcDimensions(),this.doLayout()},onDestroy:function(){e(window).unbind("resize",this.onWindowResizeDelegate),this._super(arguments)}});return n.registerType("viewport",i),i}),define("jqc/form/field/Field",["jquery","lodash","Class","jqc/Component","jqc/template/Template","jqc/template/LoDash"],function(e,t,n,r,i,s){var o=r.extend({abstractClass:!0,label:"",labelAlign:"left",labelWidth:75,extraMsg:"",baseCls:"jqc-form-Field",elType:"table",labelRenderTpl:new s(['<label id="<%= elId %>-label" for="<%= inputId %>" class="<%= baseCls %>-label"><%= label %></label>']),renderTpl:new s(['<% if( labelAlign === "top" ) { %>',"<tr>",'<td id="<%= elId %>-topLabelCell" class="<%= baseCls %>-topLabelCell" colspan="2">',"<%= labelMarkup %>","</td>","</tr>","<% } %>","<tr>",'<td id="<%= elId %>-leftLabelCell" class="<%= baseCls %>-leftLabelCell" width="<%= labelWidth %>">','<% if( labelAlign === "left" ) { %>',"<%= labelMarkup %>","<% } %>","</td>",'<td id="<%= elId %>-inputCell" class="<%= baseCls %>-inputCell" width="100%">','<div id="<%= elId %>-inputContainer" class="<%= baseCls %>-inputContainer" style="position: relative;"></div>',"</td>","</tr>","<tr>","<td></td>",'<td class="<%= baseCls %>-extraMsgCell">','<div id="<%= elId %>-extraMsg" class="<%= baseCls %>-extraMsg"><%= extraMsg %></div>',"</td>","</tr>"]),initComponent:function(){this.addEvents("change","focus","blur"),this.inputId=this.elId+"-input";var e=this.labelAlign=this.labelAlign.toLowerCase(),t=this.baseCls+"-"+(this.label?e+"Label":"noLabel");this.addCls(t),this.inputName=typeof this.inputName!="undefined"?this.inputName:this.inputId,this._super(arguments)},getRenderTplData:function(){var e=this.labelAlign,n=this.labelRenderTpl instanceof i?this.labelRenderTpl:new s(this.labelRenderTpl),r=n.apply(this.getLabelRenderTplData());return t.assign(this._super(arguments),{inputId:this.inputId,inputName:this.inputName,labelAlign:e,labelWidth:this.label&&e==="left"?this.labelWidth:0,labelMarkup:r,extraMsg:this.extraMsg||""})},getLabelRenderTplData:function(){return{elId:this.elId,baseCls:this.baseCls,inputId:this.inputId,label:this.label||""}},onRender:function(){this._super(arguments);var t=this.elId;this.$labelEl=e("#"+t+"-label"),this.$inputContainerEl=e("#"+t+"-inputContainer"),this.$extraMsgEl=e("#"+t+"-extraMsg")},setLabel:function(e){return this.label=e,this.rendered&&(this.$el[e?"removeClass":"addClass"](this.baseCls+"-noLabel"),this.$labelEl.html(e)),this},getLabel:function(){return this.label},setExtraMsg:function(e){return this.extraMsg=e,this.rendered&&this.$extraMsgEl.html(e),this},getExtraMsg:function(){return this.extraMsg},getLabelEl:function(){return this.$labelEl},getInputContainerEl:function(){return this.$inputContainerEl},setValue:n.abstractMethod,getValue:n.abstractMethod,onChange:function(e){this.fireEvent("change",this,e)},focus:function(){return this.onFocus(),this},onFocus:function(){this.addCls(this.baseCls+"-focused"),this.fireEvent("focus",this)},blur:function(){return this.onBlur(),this},onBlur:function(){this.removeCls(this.baseCls+"-focused"),this.fireEvent("blur",this)}});return o}),define("jqc/form/field/Checkbox",["jquery","lodash","jqc/ComponentManager","jqc/form/field/Field"],function(e,t,n,r){var i=r.extend({checkboxLabel:"",componentCls:"jqc-form-CheckboxField",onRender:function(){this._super(arguments),this.$inputEl=e('<input type="checkbox" class="'+this.componentCls+'-input" id="'+this.inputId+'" name="'+this.inputName+'"'+(this.value?" checked":"")+" />").appendTo(this.$inputContainerEl),this.$checkboxLabelEl=e('<label for="'+this.inputId+'" class="'+this.componentCls+'-label" />&nbsp;'+(this.checkboxLabel||"")).appendTo(this.$inputContainerEl),this.$inputEl.on({change:t.bind(function(){this.onChange(this.getValue())},this)})},setValue:function(e){this.rendered?this.$inputEl.prop("checked",!!e):this.value=e},getValue:function(){return this.rendered?this.$inputEl.prop("checked"):!!this.value}});return n.registerType("checkbox",i),n.registerType("checkboxfield",i),i}),define("jqc/util/OptionsStore",["lodash","Class"],function(e,t){var n=t.extend(Object,{constructor:function(e){this.setOptions(e||[])},normalizeOptions:function(t){return e.map(t,function(e){return this.normalizeOption(e)},this)},normalizeOption:function(t){return typeof t=="object"?(t=e.clone(t),t.value===undefined&&(t.value=t.text),t):{text:t,value:t}},setOptions:function(e){this.options=this.normalizeOptions(e)},addOption:function(e,t){var n=this.options;e=this.normalizeOption(e),t=typeof t!="undefined"?t:n.length,n.splice(t,0,e)},removeOptionByText:function(t){var n=this.options,r=e.findIndex(n,{text:t});r!==-1&&n.splice(r,1)},removeOptionByValue:function(t){var n=this.options,r=e.findIndex(this.options,{value:t});r!==-1&&n.splice(r,1)},getOptions:function(){return this.options},getCount:function(){return this.options.length},getAtIndex:function(e){return this.options[e]||null},getByText:function(t){return e.find(this.options,{text:t})||null},getByValue:function(t){return e.find(this.options,{value:t})||null}});return n}),define("jqc/form/field/Dropdown",["jquery","lodash","jqc/util/Css","jqc/ComponentManager","jqc/form/field/Field","jqc/template/LoDash","jqc/util/OptionsStore"],function(e,t,n,r,i,s,o){var u=i.extend({menuCls:"",menuCollisionStrategy:"flip",componentCls:"jqc-form-DropdownField",optionsMenuOpen:!1,statics:{dropdownRenderTpl:new s(['<input type="hidden" id="<%= inputId %>" name="<%= inputName %>" value="<%= initialValue %>" />','<div id="<%= elId %>-dropdownContainer" class="<%= componentCls %>-dropdownContainer">','<div id="<%= elId %>-selectText" class="<%= componentCls %>-selectText">','<div class="<%= optionClass %>" style="<%= optionStyles %>"><%= optionText %></div>',"</div>",'<div id="<%= elId %>-openButton" class="<%= componentCls %>-openButton" />',"</div>"]),optionsMenuRenderTpl:new s(['<li data-elem="jqc-form-DropdownField-menu-item" class="<%= componentCls %>-menu-item <%= menuItemCls %>" style="<%= menuItemStyle %>">',"<%= text %>","</li>"])},initComponent:function(){this._super(arguments),this.options=this.options||[],this.optionsStore=new o(this.options),this.initValue()},initValue:function(){var e=this.optionsStore,t=e.getOptions(),n=t.length;typeof this.value=="undefined"?n>0&&(this.value=t[0].value):e.getByValue(this.value)===null&&(this.value=n>0?t[0].value:undefined)},onRender:function(r){this._super(arguments);var i=this.elId,s=this.inputId,o=this.$inputContainerEl,a=u.dropdownRenderTpl,f=this.getValue(),l=this.optionsStore.getByValue(f),c=a.apply({componentCls:this.componentCls,elId:i,inputId:s,inputName:this.inputName,initialValue:f,optionText:l?l.text:"",optionClass:l&&l.cls?l.cls:"",optionStyles:l&&l.style?n.mapToString(l.style):""});o.append(c),this.$inputEl=e("#"+s),this.$dropdownContainer=e("#"+i+"-dropdownContainer"),this.$selectText=e("#"+i+"-selectText"),this.$openButton=e("#"+i+"-openButton");var h=t.bind(this.onDropdownClick,this);this.$selectText.click(h),this.$openButton.click(h),this.$optionsMenu=e('<ul class="'+this.componentCls+"-menu "+this.menuCls+'" />').hide().appendTo("body"),this.redrawOptions(),this.documentClickHandler=t.bind(this.onDocumentClick,this),e(document).bind("mousedown",this.documentClickHandler)},onDocumentClick:function(t){if(this.optionsMenuOpen){var n=e(t.target).parents().andSelf(),r=this.$dropdownContainer[0],i=this.$optionsMenu[0],s=!1;for(var o=0,u=n.length;o<u;o++)if(n[o]===r||n[o]===i){s=!0;break}s||this.hideOptionsMenu()}},onDropdownClick:function(t){t.preventDefault(),this.toggleOptionsMenu();var n=this.$optionsMenu,r=e("li."+this.componentCls+"-menu-item-selected",n).offset().top,i=r-n.offset().top;n.animate({scrollTop:i})},onOptionClick:function(t){t.preventDefault();var n=e(t.target),r=this.getValue(),i=n.data("value");r!==i&&(this.setValue(i),this.onChange(this.getValue())),this.hideOptionsMenu()},setOptions:function(e){this.optionsStore.setOptions(e),this.onOptionsChange(),this.redrawOptions()},addOption:function(e,t){this.optionsStore.addOption(e,t),this.onOptionsChange(),this.redrawOptions()},removeOptionByValue:function(e){this.optionsStore.removeOptionByValue(e),this.onOptionsChange(),this.redrawOptions()},removeOptionByText:function(e){this.optionsStore.removeOptionByText(e),this.onOptionsChange(),this.redrawOptions()},onOptionsChange:function(){var e=this.getValue(),t=this.optionsStore;if(t.getCount()===0)throw new Error("Error: no 'options' remain in the DropdownField after options modification. This is an error condition.");t.getByValue(e)===null&&this.setValue(t.getAtIndex(0).value)},getOptions:function(){return this.optionsStore.getOptions()},redrawOptions:function(){if(this.rendered){var e=this.getOptions(),r=e.length,i=this.$optionsMenu,s=u.optionsMenuRenderTpl,o=this.getValue(),a,f;i.empty();var l=[];for(a=0;a<r;a++){f=e[a];var c=f.cls||"";f.value===o&&(c+=" "+this.componentCls+"-menu-item-selected"),l.push(s.apply({componentCls:this.componentCls,menuItemCls:c,menuItemStyle:f.style?n.mapToString(f.style):"",text:f.text}))}i.append(l.join(""));var h=i.find('[data-elem="jqc-form-DropdownField-menu-item"]');for(a=0;a<r;a++)h.eq(a).data("value",e[a].value);h.click(t.bind(this.onOptionClick,this))}},showOptionsMenu:function(){this.optionsMenuOpen=!0,this.$optionsMenu.show(),this.$optionsMenu.width(this.$selectText.width()),this.$optionsMenu.position({my:"left center",at:"left center",of:this.$selectText,collision:this.menuCollisionStrategy})},hideOptionsMenu:function(e){this.optionsMenuOpen=!1,this.$optionsMenu.hide()},toggleOptionsMenu:function(){this.optionsMenuOpen?this.hideOptionsMenu():this.showOptionsMenu()},setValue:function(t){if(typeof t=="undefined"||t===null)return;var r=this.optionsStore.getByValue(t);if(r){this.value=t;if(this.rendered){var i=e('<div class="'+r.cls+'" style="'+(r.style?n.mapToString(r.style):"")+'">'+r.text+"</div>");this.$selectText.html(i);var s=this.$optionsMenu,o=this.componentCls+"-menu-item-selected";s.find("li."+o).removeClass(o);var u=s.find('li[data-elem="jqc-form-DropdownField-menu-item"]');for(var a=0,f=u.length;a<f;a++){var l=u.eq(a);if(l.data("value")===t){l.addClass(o);break}}this.$inputEl.val(t)}}},getValue:function(){return this.value},setText:function(e){var t=this.optionsStore.getByText(e);t&&this.setValue(t.value)},getText:function(){var e=this.optionsStore.getByValue(this.getValue());return e.text},hasOptionValue:function(e){var t=this.getOptions();for(var n=0,r=t.length;n<r;n++)if(t[n].value===e)return!0;return!1},onDestroy:function(){this.rendered&&(e(document).unbind("mousedown",this.documentClickHandler),this.$optionsMenu.remove()),this._super(arguments)}});return r.registerType("dropdown",u),r.registerType("dropdownfield",u),u}),define("jqc/form/field/Hidden",["jquery","lodash","jqc/ComponentManager","jqc/form/field/Field"],function(e,t,n,r){var i=r.extend({initComponent:function(){this.label="",this.extraMsg="",this.hidden=!0,this._super(arguments)},onRender:function(t){this._super(arguments),this.$inputEl=e('<input type="hidden" id="'+this.inputId+'" name="'+this.inputName+'" value="'+(this.value||"")+'" />').appendTo(this.$inputContainerEl)},setValue:function(e){this.rendered?this.$inputEl.val(e):this.value=e},getValue:function(){return this.rendered?this.$inputEl.val():this.value}});return n.registerType("hidden",i),n.registerType("hiddenfield",i),i}),define("jqc/form/field/Radio",["jquery","lodash","jqc/ComponentManager","jqc/form/field/Field","jqc/template/LoDash","jqc/util/OptionsStore"],function(e,t,n,r,i,s){var o=r.extend({stacked:!1,componentCls:"jqc-form-RadioField",radioTpl:new i(['<input type="radio" id="<%= name %>-<%= num %>" name="<%= name %>" class="<%= componentCls %>-input" value="<%= inputValue %>" <% if( checked ) { %>checked<% } %>>','<label for="<%= name %>-<%= num %>" class="<%= componentCls %>-label"><%= text %></label>']),initComponent:function(){this.optionsStore=new s(this.options);if(this.optionsStore.getOptions().length===0)throw new Error("Error: The ButtonSet's 'options' was not configured.");typeof this.value=="undefined"?this.value=this.optionsStore.getOptions()[0].value:this.optionsStore.getByValue(this.value)===null&&(this.value=this.optionsStore.getOptions()[0].value),this._super(arguments);if(!this.inputName)throw new Error("Error: RadioField must have a valid `inputName`. Make sure that the `inputName` has not been set to an empty string or other falsy value.")},onRender:function(e){this._super(arguments);var n=this.optionsStore.getOptions(),r=this.radioTpl,i=this.inputName,s=this.$inputContainerEl,o=this.stacked,u=this.value,a=[];for(var f=0,l=n.length;f<l;f++){var c=n[f];a.push(r.apply({componentCls:this.componentCls,name:i,num:f,inputValue:c.value,text:c.text,checked:u===c.value})),o&&a.push("<br />")}s.append(a.join("")),s.on({change:t.bind(function(){this.onChange(this.getValue())},this)})},setValue:function(e){var t=this.optionsStore.getByValue(e);t!==null&&(this.rendered?this.$inputContainerEl.find(":radio[value="+e+"]").prop("checked",!0):this.value=e)},getValue:function(){return this.rendered?this.$inputContainerEl.find(":radio:checked").val():this.value}});return n.registerType("radio",o),n.registerType("radiofield",o),o}),define("jqc/form/field/Text",["jquery","lodash","jqc/util/Html","jqc/ComponentManager","jqc/form/field/Field"],function(e,t,n,r,i){var s=i.extend({selectOnFocus:!1,emptyText:"",componentCls:"jqc-form-TextField",focused:!1,initComponent:function(){this._super(arguments),this.addEvents("keydown","keyup","keypress"),this.value=this.normalizeValue(this.value)},onRender:function(n){this._super(arguments);var r=this.$inputEl=this.createInputEl().appendTo(this.$inputContainerEl);r.on({change:t.bind(function(e){this.onChange(this.getValue())},this),focus:t.bind(this.onFocus,this),blur:t.bind(this.onBlur,this),keydown:t.bind(this.onKeyDown,this),keyup:t.bind(this.onKeyUp,this),keypress:t.bind(this.onKeyPress,this)}),this.$emptyTextEl=e('<div class="'+this.componentCls+'-emptyText">'+this.emptyText+"</div>").on("click",function(){r.focus()}).appendTo(this.$inputContainerEl),this.handleEmptyText()},createInputEl:function(){var t=n.encode(this.value||"");return e(['<input type="text"',' id="'+this.inputId+'"',' name="'+this.inputName+'"',' class="'+this.componentCls+'-input"',' value="'+t+'"',this.readOnly?' readonly="readonly"':"","/>"].join(""))},getInputEl:function(){return this.$inputEl||null},normalizeValue:function(e){return typeof e=="undefined"||e===null?"":typeof e!="string"?e.toString():e},setValue:function(e){e=this.normalizeValue(e),this.rendered?this.$inputEl.val(e):this.value=e,this.onChange(e)},getValue:function(){return this.rendered?this.$inputEl.val():this.value},setEmptyText:function(e){this.emptyText=e,this.rendered&&this.$emptyTextEl.html(e)},getEmptyText:function(){return this.emptyText},select:function(){this.$inputEl.select()},onChange:function(){this.handleEmptyText(),this._super(arguments)},focus:function(){return this.$inputEl.focus(),this._super(arguments)},blur:function(){return this.$inputEl.blur(),this._super(arguments)},onFocus:function(){this.focused=!0,this.handleEmptyText(),this.selectOnFocus&&this.select(),this._super(arguments)},onBlur:function(){this.focused=!1,this.handleEmptyText(),this._super(arguments)},isFocused:function(){return this.focused},onKeyDown:function(e){this.fireEvent("keydown",this,e)},onKeyUp:function(e){this.fireEvent("keyup",this,e)},onKeyPress:function(e){this.fireEvent("keypress",this,e)},handleEmptyText:function(){this.rendered&&this.$emptyTextEl[!this.focused&&this.getValue()===""?"show":"hide"]()}});return r.registerType("textfield",s),s}),define("jqc/form/field/TextArea",["jquery","lodash","jqc/util/Css","jqc/ComponentManager","jqc/form/field/Text"],function(e,t,n,r,i){var s=i.extend({autoGrow:!1,componentCls:"jqc-form-TextAreaField",autoGrowMimicStyles:["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight"],onRender:function(){this._super(arguments);if("height"in this){var r=this.height;this.labelAlign==="top"&&(r-=this.$labelEl.outerHeight(!0)),r-=n.getMargin(this.$inputContainerEl,"tb")+n.getPadding(this.$inputContainerEl,"tb"),r-=n.getMargin(this.$inputEl,"tb")+n.getPadding(this.$inputEl,"tb"),this.extraMsg&&(r-=this.$extraMsgEl.outerHeight(!0)),this.$inputEl.css("height",r+"px")}if(this.autoGrow){var i=this.autoGrowMimicStyles,s=this.$inputEl,o=e("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),u=parseInt(s.css("line-height"),10)||parseInt(s.css("font-size"),10),a=parseInt(s.css("height"),10)||u*3,f=parseInt(s.css("max-height"),10)||Number.MAX_VALUE;f<0&&(f=Number.MAX_VALUE),s.css("resize","none"),this.autoGrowComputedStyles={lineHeight:u,minHeight:a,maxHeight:f},o.appendTo(s.parent());var l=i.length;while(l--)o.css(i[l],s.css(i[l]));s.css("minHeight",a),s.css("overflow","hidden"),s.on("cut paste",t.bind(function(){this.updateAutoGrowHeight()},this));var c=this;this.autoGrowPasteHandler=function(){setTimeout(function(){c.updateAutoGrowHeight()},250)},s.on("paste input",this.autoGrowPasteHandler),this.$autoGrowTwinDiv=o,this.updateAutoGrowHeight()}},createInputEl:function(){return e(["<textarea",' id="'+this.inputId+'"',' name="'+this.inputName+'"',' class="'+this.componentCls+'-input"',this.readOnly?' readonly="readonly"':"",">",this.value||"","</textarea>"].join(""))},setHeightAndOverflow:function(e,t){var n=this.$inputEl,r=Math.floor(parseInt(e,10));n.height()!==r&&n.css({height:r+"px",overflow:t})},updateAutoGrowHeight:function(){if(this.rendered){var e=this.$inputEl,t=this.$autoGrowTwinDiv,n=this.autoGrowComputedStyles,r=e.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),i=t.html().replace(/<br>/ig,"<br />");if(r+"&nbsp;"!==i){t.html(r+"&nbsp;");if(Math.abs(t.height()+n.lineHeight-e.height())>3){var s=t.height()+n.lineHeight;s>=n.maxHeight?this.setHeightAndOverflow(n.maxHeight,"auto"):s<=n.minHeight?this.setHeightAndOverflow(n.minHeight,"hidden"):this.setHeightAndOverflow(s,"hidden")}}}},setValue:function(){this._super(arguments),this.autoGrow&&this.updateAutoGrowHeight()},onChange:function(){this._super(arguments),this.autoGrow&&this.updateAutoGrowHeight()},onKeyUp:function(e){this._super(arguments),this.autoGrow&&this.updateAutoGrowHeight()},onBlur:function(){this._super(arguments);if(this.autoGrow){var e=this.$inputEl,t=this.$autoGrowTwinDiv,n=this.autoGrowComputedStyles;t.height()<n.maxHeight&&(t.height()>n.minHeight?e.height(t.height()):e.height(n.minHeight))}},onDestroy:function(){this.autoGrow&&this.rendered&&this.$autoGrowTwinDiv.remove(),this._super(arguments)}});return r.registerType("textarea",s),r.registerType("textareafield",s),s}),define("jqc/layout/Card.Transition",["Class","jqc/Jqc"],function(e,t){var n=e.extend(Object,{abstractClass:!0,setActiveItem:e.abstractMethod,destroy:function(){this.onDestroy()},onDestroy:t.emptyFn});return n}),define("jqc/layout/Card.SwitchTransition",["jqc/Container","jqc/layout/Card.Transition"],function(e,t){var n=t.extend({setActiveItem:function(t,n,r,i){n&&n.hide(),r&&(r.show(),r instanceof e&&r.doLayout())}});return n}),define("jqc/layout/Card",["jqc/Component","jqc/Container","jqc/layout/Layout","jqc/layout/Card.SwitchTransition"],function(e,t,n,r){var i=n.extend({activeItem:0,fit:!1,deferredRender:!0,initLayout:function(){this.addEvents("cardchange"),this.componentSizeCache={},this.transition||(this.transition=new r),this._super(arguments)},onLayout:function(e,t){this._super(arguments),typeof this.activeItem=="number"&&(this.activeItem=this.getContainer().getItemAt(this.activeItem));var n=t.width(),r=t.height();if(this.deferredRender)this.activeItem!==null&&this.renderAndSizeCard(this.activeItem,t,n,r);else for(var i=0,s=e.length;i<s;i++)this.renderAndSizeCard(e[i],t,n,r),this.activeItem!==e[i]&&e[i].hide()},renderAndSizeCard:function(e,t,n,r){this.renderComponent(e,t);if(this.fit){var i=e.getUuid(),s=this.componentSizeCache,o=s[i]||{};r!==o.height&&(this.sizeComponent(e,undefined,r),s[i]={height:r})}},setActiveItem:function(t,n){typeof t=="number"?t=this.container.getItemAt(t):t instanceof e&&!this.container.has(t)&&(t=null);var r;if(!this.container.isRendered())this.activeItem!==t&&(r=this.activeItem,this.activeItem=t,this.fireEvent("cardchange",this,t,r));else if(!t||this.activeItem!==t||!t.isRendered()||t.isHidden()){r=this.activeItem,r instanceof e||(r=null);if(t!==null){var i=this.container.getContentTarget();this.renderAndSizeCard(t,i,i.width(),i.height())}this.transition.setActiveItem(this,r,t,n),this.activeItem=t,this.fireEvent("cardchange",this,t,r)}},getActiveItem:function(){var t=this.activeItem;return t instanceof e||t===null?t:this.container.getItemAt(t)},getActiveItemIndex:function(){var t=this.activeItem;return t===null?-1:t instanceof e?this.container.getItemIndex(t):t},onDestroy:function(){this.transition.destroy(),this._super(arguments)}});return t.registerLayout("card",i),i}),define("jqc/layout/Column",["Class","jqc/Component","jqc/Container","jqc/layout/Layout"],function(e,t,n,r){var i=r.extend({onLayout:function(e,t){this._super(arguments),this.columnsLayoutInitialized?this.updateColumnsLayout(e,t):(this.initColumnsLayout(e,t),this.columnsLayoutInitialized=!0)},initColumnsLayout:function(e,t){var n="",r=e.length,i;for(i=0;i<r;i++){var s=e[i].columnWidth;typeof s!="undefined"?String(s).lastIndexOf("%")===-1&&(s+="px"):s="auto",n+='<div style="float: left; width: '+s+'" />'}n+='<div style="clear: both;" />',t.append(n);var o=this.$columnDivEls=t.find("div");for(i=0;i<r;i++)this.renderComponent(e[i],o[i])},updateColumnsLayout:function(e,t){},onDestroy:function(){this.columnsLayoutInitialized&&this.$columnDivEls.remove(),this._super(arguments)}});return n.registerLayout("column",i),i}),define("jqc/layout/VBox",["jqc/Container","jqc/layout/Layout"],function(e,t){var n=t.extend({onLayout:function(e,t){this._super(arguments);var n=[],r=0,i=0,s,o,u,a=e.length;for(s=0;s<a;s++)u=e[s],this.renderComponent(u,t,{position:s}),u.isHidden()||(u.flex?(n.push(u),r+=u.flex):(u.doLayout(),i+=u.getOuterHeight(!0)));if(r>0){var f="100%",l=t.height(),c=l-i,h=0;for(s=0,o=n.length;s<o;s++){u=n[s];var p=u.flex/r*c;h+=p%1,p=Math.floor(p),s===o-1&&(p+=Math.floor(h)),this.sizeComponent(u,f,p)}}}});return e.registerLayout("vbox",n),n}),define("jqc/util/CollectionBindable",["lodash","Class","jqc/Jqc"],function(e,t,n){var r=new t({collectionProp:"collection",bindCollection:function(e){var t=this.collectionProp,n=this[t]||null;if(n!==e||!this.firstCollectionBindComplete&&e){n&&this.unbindCollectionListeners(),this[t]=e,e&&this.bindCollectionListeners(),this.firstCollectionBindComplete=!0;var r=n===e?null:n||null;this.onCollectionBind(e,r)}},unbindCollection:function(){var e=this.collectionProp,t=this[e];t&&(this.unbindCollectionListeners(),this[e]=null,this.onCollectionBind(null,t))},onCollectionBind:n.emptyFn,bindCollectionListeners:function(){var t=this[this.collectionProp],n=e.clone(this.getCollectionListeners(t));t.on(n),this.collectionListeners=n},getCollectionListeners:function(e){return{}},unbindCollectionListeners:function(){var e=this[this.collectionProp];e&&this.collectionListeners&&e.un(this.collectionListeners)}});return r}),define("jqc/view/Collection",["jquery","lodash","jqc/ComponentManager","jqc/Component","jqc/util/CollectionBindable"],function(e,t,n,r,i){var s=r.extend({mixins:[i],modelsVar:"models",maskOnLoad:!0,initComponent:function(){this._super(arguments);if(!this.tpl)throw new Error("`tpl` config required");if(!this.modelSelector)throw new Error("`modelSelector` config required");this.modelElCache={},this.collection?this.bindCollection(this.collection):this.refresh(),this.maskConfig=this.maskConfig||{spinner:!0,msg:"Loading..."}},onAfterRender:function(){this._super(arguments);var e=this.collection;e&&(this.collectModelElements(this.collectModels()),e.isLoading()&&(this.applyLoadingHeight(),this.mask()))},getCollection:function(){return this.collection||null},getCollectionListeners:function(e){return{loadbegin:this.onLoadBegin,load:this.onLoadComplete,addset:this.refresh,removeset:this.refresh,reorder:this.refresh,changeset:this.refresh,scope:this}},onCollectionBind:function(e){this.refresh()},onLoadBegin:function(){this.maskOnLoad&&this.rendered&&(this.applyLoadingHeight(),this.mask())},onLoadComplete:function(){this.maskOnLoad&&this.rendered&&(this.unMask(),this.removeLoadingHeight())},applyLoadingHeight:function(){var e=this.loadingHeight,t=this.$el;e>this.getHeight()&&(this.hasLoadingHeight=!0,t.css("min-height",e+"px"))},removeLoadingHeight:function(){if(this.hasLoadingHeight){var e=this.minHeight?this.minHeight+"px":"";this.$el.css("min-height",e),this.hasLoadingHeight=!1}},refresh:function(){if(!this.collection)this.update("");else{var e=this.collectModels();this.update(this.prepareTplData(e)),this.rendered&&this.collectModelElements(e)}},prepareTplData:function(e){var t={};return t[this.modelsVar]=e,t},collectModels:function(){return this.collection?this.collection.getModels():[]},collectModelElements:function(e){var t=this.modelElCache={},n=this.getContentTarget().find(this.modelSelector);for(var r=0,i=n.length;r<i;r++){var s=n.eq(r),o=e[r].getClientId();s.attr("data-CollectionView-clientId",o),t[o]=s}},getModelFromElement:function(e){var t=this.getModelParentElement(e);return this.collection.getByClientId(t?t.attr("data-CollectionView-clientId"):-1)},getModelParentElement:function(t){var n=e(t).closest(this.modelSelector);return n.length>0?n:null},getElementFromModel:function(e){return this.rendered?this.modelElCache[e.getClientId()]||null:null},onDestroy:function(){this.unbindCollection(),this._super(arguments)}});return n.registerType("collectionview",s),s}),define("jqc/view/Model",["jquery","lodash","jqc/ComponentManager","jqc/Component"],function(e,t,n,r){var i=r.extend({modelVar:"model",maskOnLoad:!0,initComponent:function(){this._super(arguments);if(!this.tpl)throw new Error("`tpl` config required");this.bindModel(this.model||null),this.maskConfig=this.maskConfig||{msg:"Loading..."}},onAfterRender:function(){this._super(arguments)},getModel:function(){return this.model||null},bindModel:function(e){if(this.model!==e||!this.firstBindComplete)this.model&&this.unbindModelListeners(),this.model=e,e&&this.bindModelListeners(),this.firstBindComplete=!0,this.refresh()},bindModelListeners:function(){var e=this.model,n=t.clone(this.getModelListeners(e));e.on(n),this.modelListeners=n},getModelListeners:function(e){return{loadbegin:this.onLoadBegin,load:this.onLoadComplete,changeset:this.refresh,rollback:this.refresh,scope:this}},unbindModelListeners:function(){this.model&&this.modelListeners&&this.model.un(this.modelListeners)},onLoadBegin:function(){this.maskOnLoad&&this.mask()},onLoadComplete:function(){this.maskOnLoad&&this.unMask()},refresh:function(){this.model?this.update(this.prepareTplData(this.model)):this.update("")},prepareTplData:function(e){var t={};return t[this.modelVar]=e,t},onDestroy:function(){this.model&&(this.unbindModelListeners(),delete this.model),this._super(arguments)}});return n.registerType("modelview",i),i}),define("jqc/window/Window",["jqc/ComponentManager","jqc/Overlay"],function(e,t){var n=t.extend({closeButton:!0,closeAction:"destroy",closeOnEscape:!0,baseCls:"jqc-Window",x:"center",y:"center",initComponent:function(){this.closeButton&&(this.toolButtons=(this.toolButtons||[]).concat({toolType:"close",handler:this.doClose,scope:this})),this._super(arguments)},onRender:function(){this._super(arguments);if(this.closeOnEscape){var e=this;this.$el.keyup(function(t){t.keyCode===27&&e.closeOnEscape&&e.doClose()})}},doClose:function(){this.hide(),this.closeAction==="destroy"&&(this.hiding?this.on("afterhide",function(){this.destroy()},this):this.destroy())}});return e.registerType("window",n),n}),require(["jqc/Component","jqc/ComponentManager","jqc/Container","jqc/Image","jqc/Jqc","jqc/Label","jqc/Mask","jqc/Overlay","jqc/Viewport","jqc/anim/Animation","jqc/button/Button","jqc/form/field/Checkbox","jqc/form/field/Dropdown","jqc/form/field/Field","jqc/form/field/Hidden","jqc/form/field/Radio","jqc/form/field/Text","jqc/form/field/TextArea","jqc/layout/Auto","jqc/layout/Card","jqc/layout/Card.SwitchTransition","jqc/layout/Card.Transition","jqc/layout/Column","jqc/layout/Fit","jqc/layout/HBox","jqc/layout/Layout","jqc/layout/VBox","jqc/panel/Panel","jqc/panel/ToolButton","jqc/plugin/Plugin","jqc/template/LoDash","jqc/template/Template","jqc/util/Css","jqc/util/Html","jqc/util/OptionsStore","jqc/view/Collection","jqc/view/Model","jqc/window/Window"]);